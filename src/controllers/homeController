const connection = require('../config/database') //import connection từ file database.js
const sql = require('mssql') //import thư viện sql để sử dụng các hàm của nó
require('dotenv').config() //đọc file .env và lưu vào biến process.env 

const getHomepage = (req, res) => {
    res.render('homepage.ejs') //render file homepage.ejs
}

const getABC = (req, res) => {
    connection
        .then((pool) => {
            return pool.request().query('SELECT * FROM Users')
        })
        .then(result => {
            const users = result.recordset;
            console.log(users);
            res.render('sample.ejs', {users});
        })
        .catch((err) => {
            console.error('Database connection failed:', err)
        })
}

module.exports = {
    getHomepage,
    getABC
}